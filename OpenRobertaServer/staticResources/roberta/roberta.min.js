function initUserState(){USER.clear(function(e){response(e)}),userState.version="xx.xx.xx",userState.language="DE",userState.robot="ev3",userState.id=-1,userState.accountName="",userState.name="",userState.program="NEPOprog",userState.configuration="EV3basis",userState.programSaved=!1,userState.configurationSaved=!1,userState.programModified=!1,userState.programShared=!1,userState.programTimestamp="",userState.configurationModified=!1,userState.toolbox="beginner",userState.token="1A2B3C4D",userState.doPing=!0,userState.robotName="",userState.robotState="",userState.robotBattery="",userState.robotWait="",userState.robotVersion="",userState.serverVersion="",userState.programBlocks=null,userState.programBlocksSaved=null,userState.bricklyReady=!1,userState.blocklyReady=!1,userState.blocklyTranslated=!1,userState.bricklyTranslated=!1}function login(){USER.login($("#accountNameS").val(),$("#pass1S").val(),function(e){"ok"===e.rc&&(userState.accountName=e.userAccountName,userState.name=void 0===e.userName||""===e.userName?e.userAccountName:e.userName,userState.id=e.userId,setHeadNavigationMenuState("login"),setRobotState(e)),displayInformation(e,"MESSAGE_USER_LOGIN",e.message,userState.name)})}function logout(){USER.logout(function(e){response(e),"ok"===e.rc&&(initUserState(),setProgram(userState.program),setConfiguration(userState.configuration),$("#programNameSave :not(btn)").val(""),$("#configurationNameSave :not(btn)").val(""),$("#login-user :not(btn) :not(.backButton)").val(""),setHeadNavigationMenuState("logout"),Blockly.getMainWorkspace().saveButton.disable(),setRobotState(e),$("#tabProgram").click(),displayInformation(e,"MESSAGE_USER_LOGOUT",e.message))})}function saveUserToServer(){$("#pass1").val()!=$("#pass2").val()?displayMessage("MESSAGE_PASSWORD_ERROR","POPUP",""):USER.saveUserToServer($("#accountName").val(),$("#userName").val(),$("#userEmail").val(),$("#pass1").val(),function(e){"ok"===e.rc&&(setRobotState(e),$("#accountNameS").val($("#accountName").val()),$("#pass1S").val($("#pass1").val()),login()),displayInformation(e,"",e.message)})}function deleteUserOnServer(){USER.deleteUserOnServer(userState.accountName,$("#pass1D").val(),function(e){"ok"===e.rc&&logout(),displayInformation(e,"MESSAGE_USER_DELETED",e.message,userState.name)})}function handleFirmwareConflict(){var e="(.+..+)..+",t=userState.serverVersion.match(e)[1],o=userState.robotVersion.match(e)[1];return t>o?(LOG.info("The firmware version '"+userState.serverVersion+"' on the server is newer than the firmware version '"+userState.robotVersion+"' on the robot"),$("#confirmUpdateFirmware").modal("show"),!0):o>t?(LOG.info("The firmware version '"+userState.serverVersion+"' on the server is older than the firmware version '"+userState.robotVersion+"' on the robot"),displayMessage("MESSAGE_FIRMWARE_ERROR","POPUP",""),!0):!1}function updateFirmware(){ROBOT.updateFirmware(function(e){setRobotState(e),"ok"===e.rc?(displayMessage("MESSAGE_RESTART_ROBOT","POPUP",""),userState.robotState="disconnected"):displayInformation(e,"",e.message,userState.robotFirmware)})}function showUserInfo(){$("#loggedIn").text(userState.name),$("#popup_username").text(-1!=userState.id?Blockly.Msg.POPUP_USERNAME+": ":Blockly.Msg.POPUP_USERNAME_LOGOFF),$("#programName").text(userState.program),$("#configurationName").text(userState.configuration),$("#toolbox").text("beginner"===userState.toolbox?Blockly.Msg.MENU_BEGINNER:Blockly.Msg.MENU_EXPERT),$("#show-state-info").modal("show")}function showRobotInfo(){if(userState.robotName){$("#robotName").text("oraSim"===userState.robot?"ORSim":userState.robotName),"wait"===userState.robotState?($("#robotStateWait").css("display","inline"),$("#robotStateDisconnected").css("display","none"),$("#robotStateBusy").css("display","none")):"busy"===userState.robotState?($("#robotStateWait").css("display","none"),$("#robotStateDisconnected").css("display","none"),$("#robotStateBusy").css("display","inline")):($("#robotStateWait").css("display","none"),$("#robotStateDisconnected").css("display","inline"),$("#robotStateBusy").css("display","none")),$("#robotBattery").text("EN"==userState.language?userState.robotBattery+" V":userState.robotBattery.toString().replace(".",",")+" V");var e=parseInt(userState.robotWait,10);$("#robotWait").text(1e3>e?e+" ms":Math.round(e/1e3)+" s"),$("#show-robot-info").modal("show")}else displayMessage("ORA_ROBOT_NOT_CONNECTED","POPUP","")}function injectBlockly(e,t,o){response(e);var a=o|!1;"ok"===e.rc&&(a?($("#blocklyDiv").html(""),Blockly.inject(document.getElementById("blocklyDiv"),{path:"/blockly/",toolbox:e.data,readOnly:!0,trashcan:!1,code:!1,save:!1,check:!1,start:!1})):($("#blocklyDiv").html(""),Blockly.inject(document.getElementById("blocklyDiv"),{path:"/blockly/",toolbox:e.data,trashcan:!0,code:!0,save:!0,check:!0,start:!0})),$(window).width()<768&&a?Blockly.getMainWorkspace().clear():(initProgramEnvironment(t),setRobotState(e)),"ev3"===userState.robot?($("#menuShowCode").parent().removeClass("disabled"),Blockly.getMainWorkspace().codeButton.enable()):($("#menuShowCode").parent().addClass("disabled"),Blockly.getMainWorkspace().codeButton.disable()))}function initProgramEnvironment(e){Blockly.getMainWorkspace().clear();var t,o;$(window).width()<768?(t=25,o=25):(t=370,o=50);var a="<block_set xmlns='http: // www.w3.org/1999/xhtml'><instance x='"+t+"' y='"+o+"'><block type='robControls_start'></block></instance></block_set>",n=e||a,r=Blockly.Xml.textToDom(n);Blockly.Xml.domToWorkspace(Blockly.mainWorkspace,r),userState.blocklyReady=!0,Blockly.fireUiEvent(window,"resize")}function setProgram(e,t){e&&(userState.program=e,t&&(e+=' (<span class="typcn typcn-user progName"></span>'+t+")"),$("#tabProgramName").html(e))}function setConfiguration(e){e&&(userState.configuration=e,$("#tabConfigurationName").text(e))}function setToken(e){var t=e.toUpperCase();ROBOT.setToken(t,function(e){"ok"===e.rc&&(userState.token=t),displayInformation(e,"MESSAGE_ROBOT_CONNECTED",e.message,userState.robotName),setRobotState(e),handleFirmwareConflict()})}function response(e){LOG.info("result from server: "+UTIL.formatResultLog(e)),"ok"!=e.rc&&displayMessage(e.message,"POPUP","")}function saveAsProgramToServer(){var e=$("#programNameSave").val().trim();if(!e.match(/^[a-zA-Z][a-zA-Z0-9]*$/))return void displayMessage("MESSAGE_INVALID_NAME","POPUP","");var t=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),o=Blockly.Xml.domToText(t);LOG.info("saveAs program "+userState.program+" login: "+userState.id);var a=UTIL.parseDate(userState.programTimestamp);PROGRAM.saveAsProgramToServer(e,a,o,function(t){response(t),"ok"===t.rc&&(setProgram(e),$("#menuSaveProg").parent().removeClass("disabled"),Blockly.getMainWorkspace().saveButton.enable(),userState.programSaved=!0,userState.programModified=!1,userState.programTimestamp=UTIL.formatDateComplete(t.lastChanged),displayInformation(t,"MESSAGE_EDIT_SAVE_PROGRAM_AS",t.message,userState.program))})}function saveToServer(){if(userState.program){var e=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),t=Blockly.Xml.domToText(e);userState.programSaved=!0,LOG.info("save program "+userState.program+" login: "+userState.id),$(".modal").modal("hide");var o=UTIL.parseDate(userState.programTimestamp);PROGRAM.saveProgramToServer(userState.program,userState.programShared,o,t,function(e){"ok"===e.rc&&(userState.programModified=!1,userState.programTimestamp=UTIL.formatDateComplete(e.lastChanged)),displayInformation(e,"MESSAGE_EDIT_SAVE_PROGRAM",e.message,userState.program)})}}function saveAsConfigurationToServer(){var e=$("#configurationNameSave").val();if(!e.match(/^[a-zA-Z][a-zA-Z0-9]*$/))return void displayMessage("MESSAGE_INVALID_NAME","POPUP","");setConfiguration(e),$("#menuSaveConfig").parent().removeClass("login"),$("#menuSaveConfig").parent().removeClass("disabled"),UTIL.getBricklyFrame("#bricklyFrame").Blockly.getMainWorkspace().saveButton.enable(),userState.configurationSaved=!0,$(".modal").modal("hide");var t=UTIL.getBricklyFrame("#bricklyFrame").getXmlOfConfiguration(userState.configuration);LOG.info("save brick configuration "+userState.configuration),CONFIGURATION.saveAsConfigurationToServer(userState.configuration,t,function(e){"ok"===e.rc&&(userState.configurationModified=!1),displayInformation(e,"MESSAGE_EDIT_SAVE_CONFIGURATION_AS",e.message,userState.configuration)})}function saveConfigurationToServer(){if(userState.configuration){userState.configurationSaved=!0,$(".modal").modal("hide");var e=UTIL.getBricklyFrame("#bricklyFrame").getXmlOfConfiguration(userState.configuration);LOG.info("save brick configuration "+userState.configuration),CONFIGURATION.saveConfigurationToServer(userState.configuration,e,function(e){"ok"===e.rc&&(userState.configurationModified=!1),displayInformation(e,"MESSAGE_EDIT_SAVE_CONFIGURATION",e.message,userState.configuration)})}}function showJavaProgram(){LOG.info("show the generated Java program for "+userState.program);var e=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),t=Blockly.Xml.domToText(e),o=UTIL.getBricklyFrame("#bricklyFrame").getXmlOfConfiguration(userState.configuration);PROGRAM.showJavaProgram(userState.program,userState.configuration,t,o,function(e){setRobotState(e),"ok"==e.rc?displayPopupMessage("Ok-kO",e.javaSource):displayInformation(e,"",e.message,"")})}function runOnBrick(){"ev3"===userState.robot?""===userState.robotState||"disconnected"===userState.robotState?displayMessage("POPUP_ROBOT_NOT_CONNECTED","POPUP",""):"busy"===userState.robotState?displayMessage("POPUP_ROBOT_BUSY","POPUP",""):handleFirmwareConflict()?($("#buttonCancelFirmwareUpdate").css("display","none"),$("#buttonCancelFirmwareUpdateAndRun").css("display","inline")):startProgram():"oraSim"===userState.robot&&startProgram()}function showCode(){if("ev3"===userState.robot){LOG.info("show code "+userState.program+" signed in: "+userState.id);var e=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),t=Blockly.Xml.domToText(e),o=UTIL.getBricklyFrame("#bricklyFrame").getXmlOfConfiguration(userState.configuration);PROGRAM.showJavaProgram(userState.program,userState.configuration,t,o,function(e){setRobotState(e),$("#blocklyDiv").addClass("codeActive"),$("#blocklyDiv").parent().bind("transitionend",function(){Blockly.fireUiEvent(window,"resize")}),$("#codeDiv").addClass("codeActive"),$(".nav > li > ul > .robotType").addClass("disabled"),$("#head-navigation-program-edit").addClass("disabled"),$("#head-navigation-program-edit>ul").addClass("hidden"),UTIL.cacheBlocks(),COMM.json("/toolbox",{cmd:"loadT",name:userState.toolbox,owner:" "},function(e){injectBlockly(e,userState.programBlocks,!0)}),$(".code").removeClass("hide"),document.getElementById("codeDiv").innerHTML="<textarea>"+e.javaSource+"</textarea>"})}}function startProgram(){LOG.info("run "+userState.program+" signed in: "+userState.id);var e=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),t=Blockly.Xml.domToText(e),o=UTIL.getBricklyFrame("#bricklyFrame").getXmlOfConfiguration(userState.configuration);Blockly.hasStartButton&&Blockly.getMainWorkspace().startButton.disable(),PROGRAM.runOnBrick(userState.program,userState.configuration,t,o,function(e){setRobotState(e),"ok"==e.rc?"oraSim"===userState.robot?(SIM.init(e.javaScriptProgram),$("#blocklyDiv").addClass("simActive"),$("#blocklyDiv").parent().bind("transitionend",function(){Blockly.fireUiEvent(window,"resize"),setTimeout(function(){SIM.setPause(!1)},1e3)}),$("#simDiv").addClass("simActive"),$("#simButtonsCollapse").collapse({toggle:!1}),$(".nav > li > ul > .robotType").addClass("disabled"),$("#head-navigation-program-edit").addClass("disabled"),$("#head-navigation-program-edit>ul").addClass("hidden"),UTIL.cacheBlocks(),COMM.json("/toolbox",{cmd:"loadT",name:userState.toolbox,owner:" "},function(e){injectBlockly(e,userState.programBlocks,!0)}),$(".sim").removeClass("hide")):displayMessage("MESSAGE_EDIT_START","TOAST",userState.program):(Blockly.getMainWorkspace().startButton.enable(),displayInformation(e,"",e.message,""))})}function checkProgram(){LOG.info("check "+userState.program+" signed in: "+userState.id);var e=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),t=Blockly.Xml.domToText(e),o=UTIL.getBricklyFrame("#bricklyFrame").getXmlOfConfiguration(userState.configuration);displayMessage("MESSAGE_EDIT_CHECK","TOAST",userState.program),PROGRAM.checkProgramCompatibility(userState.program,userState.configuration,t,o,function(e){if("ok"==e.rc){var t=Blockly.Xml.textToDom(e.data);Blockly.mainWorkspace.clear(),Blockly.Xml.domToWorkspace(Blockly.mainWorkspace,t)}})}function showProgram(e,t,o,a){if(response(e),"ok"===e.rc){setProgram(o,a);var n=Blockly.Xml.textToDom(e.data);t&&Blockly.mainWorkspace.clear(),Blockly.Xml.domToWorkspace(Blockly.mainWorkspace,n),LOG.info("show program "+userState.program+" signed in: "+userState.id)}}function showConfiguration(e,t,o){response(e),"ok"===e.rc&&(switchToBrickly(),setConfiguration(o),UTIL.getBricklyFrame("#bricklyFrame").showConfiguration(e.data,t),LOG.info("show configuration "+userState.configuration+" signed in: "+userState.id))}function loadFromListing(){var e=$("#programNameTable .selected");if(e.length>0){var t=e[0].children[0].textContent,o=e[0].children[1].textContent,a=e[0].children[2].textContent;userState.programTimestamp=e[0].children[5].textContent,LOG.info("loadFromList "+t+" signed in: "+userState.id),PROGRAM.loadProgramFromListing(t,o,function(e){if("ok"===e.rc){userState.programShared=!1,$("#menuSaveProg").parent().removeClass("disabled"),Blockly.getMainWorkspace().saveButton.enable(),a===Blockly.Msg.POPUP_SHARE_READ?($("#menuSaveProg").parent().addClass("disabled"),Blockly.getMainWorkspace().saveButton.disable()):a===Blockly.Msg.POPUP_SHARE_WRITE&&(userState.programShared=!0),$("#tabs").tabs("option","active",0),userState.programSaved=!0;var n=o===userState.accountName?null:o;showProgram(e,!0,t,n)}displayInformation(e,"",e.message)})}}function loadConfigurationFromListing(){var e=$("#configurationNameTable .selected");if(e.length>0){var t=e[0].children[0].textContent;LOG.info("loadFromConfigurationList "+t+" signed in: "+userState.id),CONFIGURATION.loadConfigurationFromListing(t,function(e){"ok"===e.rc&&($("#tabs").tabs("option","active",0),userState.configurationSaved=!0,showConfiguration(e,!0,t),$("#menuSaveConfig").parent().removeClass("login"),$("#menuSaveConfig").parent().removeClass("disabled"),setRobotState(e)),displayInformation(e,"",e.message)})}}function shareProgramsFromListing(){var e=$("#programShareWith").val(),t=!1;if($("#relationsTable tbody tr").each(function(){var o=$(this),a=o.children("td"),n=a.eq(2).text();n===e&&(t=!0)}),e===userState.name||t)displayInformation({rc:"not ok"},"","ORA_USER_TO_SHARE_SAME_AS_LOGIN_USER");else if(""!==e){var o=$("#write:checked").val();if(o||(o=$("#read:checked").val()),o){var a=$("#programNameTable .selected"),n=a[0].children[0].textContent;LOG.info("share program "+n+" with '"+e+" having right '"+o+"'"),PROGRAM.shareProgram(n,e,o,function(e){displayInformation(e,"",e.message),"ok"===e.rc&&($("#show-relations").modal("hide"),PROGRAM.refreshList(showPrograms))})}}else $("#relationsTable tbody tr").each(function(){var e=$(this),t=e.children("td"),o=t.eq(0).text(),a=t.eq(2).text();if(""!==a){var n=t.eq(3).children("input:checked").val(),r=t.eq(4).children("input:checked").val(),i="NONE";"WRITE"===r?i=r:"READ"===n&&(i=n),LOG.info("share program "+o+" with '"+a+" having right '"+i+"'"),PROGRAM.shareProgram(o,a,i,function(e){"ok"===e.rc?(response(e),setRobotState(e),"NONE"===i&&displayInformation(e,"MESSAGE_RELATION_DELETED",e.message,o),$("#show-relations").modal("hide"),PROGRAM.refreshList(showPrograms)):displayInformation(e,"",e.message)})}});$("#programShareWith").val("")}function deleteFromListing(){for(var e=$("#programNameTable .selected"),t=[],o=0;o<e.length;o++)t.push({name:e[o].children[0].textContent,owner:e[o].children[1].textContent});for(var o=0;o<t.length;o++){var a=t[o];LOG.info("deleteFromList "+a.name+" signed in: "+userState.id),a.owner===userState.accountName?PROGRAM.deleteProgramFromListing(a.name,function(e,t){response(e),"ok"===e.rc&&(displayInformation(e,"MESSAGE_PROGRAM_DELETED",e.message,t),PROGRAM.refreshList(showPrograms))}):PROGRAM.deleteShare(a.name,a.owner,function(e,t){response(e),"ok"===e.rc&&(displayInformation(e,"MESSAGE_PROGRAM_DELETED",e.message,t),PROGRAM.refreshList(showPrograms))})}$(".modal").modal("hide"),setRobotState(result)}function deleteConfigurationFromListing(){for(var e=$("#configurationNameTable .selected"),t=0;t<e.length;t++){var o=e[t].children[0].textContent;LOG.info("deleteFromConfigurationList "+o+" signed in: "+userState.id),CONFIGURATION.deleteConfigurationFromListing(o,function(e){"ok"===e.rc&&(response(e),CONFIGURATION.refreshList(showConfigurations),setRobotState(e)),displayInformation(e,"MESSAGE_CONFIGURATION_DELETED",e.message,o)})}}function showToolbox(e,t){response(e),"ok"===e.rc&&(userState.toolbox=t,Blockly.updateToolbox(e.data),setRobotState(e),"beginner"===t?($("#menuToolboxBeginner").parent().addClass("disabled"),$("#menuToolboxExpert").parent().removeClass("disabled"),$("#menuToolboxSimulation").parent().removeClass("disabled")):"expert"===t&&($("#menuToolboxExpert").parent().addClass("disabled"),$("#menuToolboxBeginner").parent().removeClass("disabled"),$("#menuToolboxSimulation").parent().removeClass("disabled")),userState.blocklyTranslated=!0)}function loadToolbox(e){COMM.json("/toolbox",{cmd:"loadT",name:e,owner:" "},function(t){showToolbox(t,e)})}function showPrograms(e){if(response(e),"ok"===e.rc){var t=$("#programNameTable").dataTable();t.fnClearTable(),e.programNames.length>0&&t.fnAddData(e.programNames),setRobotState(e)}}function showConfigurations(e){if(response(e),"ok"===e.rc){var t=$("#configurationNameTable").dataTable();t.fnClearTable(),e.configurationNames.length>0&&t.fnAddData(e.configurationNames),setRobotState(e)}}function showRelations(e){if(response(e),"ok"===e.rc){var t=$("#relationsTable").dataTable();t.fnClearTable(),e.relations.length>0&&t.fnAddData(e.relations),setTimeout(function(){t.fnAdjustColumnSizing()},200),$("#show-relations").modal("show")}}function selectionFn(e){$(e.target.parentNode).toggleClass("selected");var t=e.currentTarget.rowIndex;if(start||(start=t),e.shiftKey){var o=t;for($("#programNameTable tbody tr").removeClass("selected"),i=Math.min(start,o);i<=Math.max(start,o);i++)$(e.target.parentNode.parentNode.childNodes).eq(i).hasClass("selected")||$(e.target.parentNode.parentNode.childNodes).eq(i).addClass("selected");window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}start=t}function beforeActivateTab(e,t){$("#tabs").tabs("refresh"),"#progListing"===t.newPanel.selector?PROGRAM.refreshList(showPrograms):"#confListing"===t.newPanel.selector&&CONFIGURATION.refreshList(showConfigurations)}function initProgramNameTable(){var e=[{sTitle:"<span lkey='Blockly.Msg.DATATABLE_PROGRAM_NAME'>Name des Programms</span>",sClass:"programs"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_CREATED_BY'>Erzeugt von</span>",sClass:"programs"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_SHARED'>Geteilt</span>",sClass:"programs"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_CREATED_ON'>Erzeugt am</span>",sClass:"programs"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_ACTUALIZATION'>Letzte Aktualisierung</span>",sClass:"programs"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_ACTUALIZATION'>Letzte Aktualisierung mit Hundertstel Sekunden</span>",sClass:"programs hidden"}],t=$("#programNameTable"),o=t.dataTable({sDom:"<lip>t<r>",aaData:[],aoColumns:e,aoColumnDefs:[{aTargets:[3,4],sType:"date-de",mRender:function(e){return UTIL.formatDate(e)}},{aTargets:[5],sType:"date-de",mRender:function(e){return UTIL.formatDateComplete(e)}},{aTargets:[2],mRender:function(e){if("WRITE"===e)var t="<span lkey='Blockly.Msg.POPUP_SHARE_WRITE'>"+Blockly.Msg.POPUP_SHARE_WRITE+"</span>";else if("READ"===e)var t="<span lkey='Blockly.Msg.POPUP_SHARE_READ'>"+Blockly.Msg.POPUP_SHARE_READ+"</span>";else if(e===!0)var t="<span lkey='Blockly.Msg.POPUP_SHARE_READ'>X</span>";else if(e===!1)var t="<span lkey='Blockly.Msg.POPUP_SHARE_READ'>-</span>";return t}}],bJQueryUI:!0,oLanguage:{sEmptyTable:"<span lkey='Blockly.Msg.DATATABLE_EMPTY_TABLE'></span>"},fnDrawCallback:function(){},scrollY:UTIL.calcDataTableHeight(),scrollCollapse:!0,paging:!1,bInfo:!1});$(window).resize(function(){var e=o.fnSettings();e.oScroll.sY=UTIL.calcDataTableHeight(),o.fnDraw(!1)}),$("#programNameTable tbody").onWrap("click","tr",selectionFn),$("#programNameTable tbody").onWrap("dblclick","tr",function(e){selectionFn(e),$("#loadFromListing").click()})}function initConfigurationNameTable(){var e=[{sTitle:"<span lkey='Blockly.Msg.DATATABLE_CONFIGURATION_NAME'>Name der Konfiguration</span>",sClass:"configurations"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_CREATED_BY'>Erzeugt von</span>",sClass:"configurations"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_CREATED_ON'>Erzeugt am</span>",sClass:"configurations"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_ACTUALIZATION'>Letzte Aktualisierung</span>",sClass:"configurations"}],t=$("#configurationNameTable"),o=t.dataTable({sDom:"<lip>t<r>",aaData:[],aoColumns:e,aoColumnDefs:[{aTargets:[2,3],sType:"date-de",mRender:function(e){return UTIL.formatDate(e)}}],bJQueryUI:!0,oLanguage:{sEmptyTable:"<span lkey='Blockly.Msg.DATATABLE_EMPTY_TABLE'></span>"},fnDrawCallback:function(){},scrollY:UTIL.calcDataTableHeight(),scrollCollapse:!0,paging:!1,bInfo:!1});$(window).resize(function(){var e=o.fnSettings();e.oScroll.sY=UTIL.calcDataTableHeight(),o.fnDraw(!1)}),$("#configurationNameTable tbody").onWrap("click","tr",selectionFn),$("#configurationNameTable tbody").onWrap("dblclick","tr",function(e){selectionFn(e),$("#loadConfigurationFromListing").click()})}function initRelationsTable(){var e=[{sTitle:"<span lkey='Blockly.Msg.DATATABLE_PROGRAM_NAME'>Name des Programms</span>",sClass:"relations hidden"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_CREATED_BY'>Erzeugt von</span>",sClass:"relations hidden"},{sTitle:"<span lkey='Blockly.Msg.DATATABLE_SHARED_WITH'>Geteilt mit</span>",sClass:"relations"},{sTitle:"<span lkey='Blockly.Msg.POPUP_SHARE_READ'>Lesen</span>",sClass:"relations"},{sTitle:"<span lkey='Blockly.Msg.POPUP_SHARE_WRITE'>Schreiben</span>",sClass:"relations"}],t=$("#relationsTable"),o=t.dataTable({sDom:"<lip>t<r>",aaData:[],aoColumns:e,aoColumnDefs:[{aTargets:[3],mRender:function(e,t,o){var a="";("WRITE"===o[4]||"READ"===e)&&(a="checked");var n="<td><input class='readRight' type='checkbox' name='right' value='READ' "+a+"></td>";return n}},{aTargets:[4],mRender:function(e){var t="";"WRITE"===e&&(t="checked");var o="<td><input class='writeRight' type='checkbox' name='right' value='WRITE' "+t+"></td>";return o}}],bJQueryUI:!0,oLanguage:{sEmptyTable:"<span lkey='Blockly.Msg.DATATABLE_EMPTY_TABLE'></span>"},fnDrawCallback:function(){},scrollY:UTIL.calcDataTableHeight(),scrollCollapse:!0,paging:!1,bInfo:!1});$(window).resize(function(){var e=o.fnSettings();e.oScroll.sY=UTIL.calcDataTableHeight(),o.fnDraw(!1)}),$("#relationsTable tbody").onWrap("click","tr",selectionFn),$("#relationsTable_wrapper").css("margin",0)}function switchToBlockly(){$("#tabs").css("display","inline"),$("#bricklyFrame").css("display","none"),$("#simConfiguration").css("display","none"),$("#tabBlockly").click(),Blockly.getMainWorkspace().render(),Blockly.getMainWorkspace().render(),bricklyActive=!1}function switchToBrickly(){"oraSim"===userState.robot?$("#simConfiguration").css("display","block"):($("#bricklyFrame").css("display","inline"),$("#tabs").css("display","none"),UTIL.getBricklyFrame("#bricklyFrame").Blockly.getMainWorkspace().render(),UTIL.getBricklyFrame("#bricklyFrame").loadToolbox()),$("#tabBrickly").click(),bricklyActive=!0}function initRobot(){ROBOT.setRobot(userState.robot,function(e){response(e),"ok"===e.rc&&(setConfiguration("EV3basis"),loadToolbox(userState.toolbox),$("#blocklyDiv").removeClass("simBackground"),$("#menuEv3").parent().addClass("disabled"),$("#menuSim").parent().removeClass("disabled"),$("#menuConnect").parent().removeClass("disabled"),$("#iconDisplayRobotState").removeClass("typcn-Roberta"),$("#iconDisplayRobotState").addClass("typcn-ev3"),$("#menuShowCode").parent().removeClass("disabled"))})}function switchRobot(e){e!==userState.robot&&ROBOT.setRobot(e,function(t){"ok"===t.rc&&(userState.robot=e,setRobotState(t),"ev3"===e?(setConfiguration("EV3basis"),$("#blocklyDiv").removeClass("simBackground"),$("#menuEv3").parent().addClass("disabled"),$("#menuSim").parent().removeClass("disabled"),$("#menuConnect").parent().removeClass("disabled"),$("#iconDisplayRobotState").removeClass("typcn-Roberta"),$("#iconDisplayRobotState").addClass("typcn-ev3"),$("#menuShowCode").parent().removeClass("disabled"),Blockly.getMainWorkspace().codeButton.enable(),UTIL.getBricklyFrame("#bricklyFrame").loadToolboxAndConfiguration()):"oraSim"===e&&(setConfiguration("ORSim"),$("#blocklyDiv").addClass("simBackground"),$("#menuEv3").parent().removeClass("disabled"),$("#menuSim").parent().addClass("disabled"),$("#menuConnect").parent().addClass("disabled"),$("#iconDisplayRobotState").removeClass("typcn-ev3"),$("#iconDisplayRobotState").addClass("typcn-Roberta"),$("#menuShowCode").parent().addClass("disabled"),Blockly.getMainWorkspace().codeButton.disable(),PROGRAM.loadProgramFromListing("NEPOprog","Roberta",function(e){"ok"===e.rc&&showProgram(e,!0,"NEPOprog")})),loadToolbox(userState.toolbox))})}function setHeadNavigationMenuState(e){$(".nav > li > ul > .login, .logout").removeClass("disabled"),"login"===e?$(".nav > li > ul > .login").addClass("disabled"):"logout"===e&&$(".nav > li > ul > .logout").addClass("disabled")}function initHeadNavigation(){$(".navbar-fixed-top").onWrap("click",".dropdown-menu li:not(.disabled) a",function(e){Blockly.hideChaff(),$(".modal").modal("hide");var t=e.target.id;return"menuRunProg"===t?runOnBrick():"menuCheckProg"===t?checkProgram():"menuNewProg"===t?newProgram():"menuListProg"===t?(deactivateProgConfigMenu(),$("#tabListing").click()):"menuSaveProg"===t?saveToServer():"menuSaveAsProg"===t?$("#save-program").modal("show"):"menuShowCode"===t?showCode():"menuToolboxBeginner"===t?loadToolbox("beginner"):"menuToolboxExpert"===t?loadToolbox("expert"):"menuCheckConfig"===t?displayMessage("MESSAGE_NOT_AVAILABLE","POPUP",""):"menuNewConfig"===t?(setConfiguration("EV3basis"),UTIL.getBricklyFrame("#bricklyFrame").initConfigurationEnvironment(),$("#menuSaveConfig").parent().addClass("disabled"),UTIL.getBricklyFrame("#bricklyFrame").Blockly.getMainWorkspace().saveButton.disable()):"menuListConfig"===t?(deactivateProgConfigMenu(),$("#tabs").css("display","inline"),$("#bricklyFrame").css("display","none"),$("#simConfiguration").css("display","none"),$("#tabConfigurationListing").click()):"menuSaveConfig"===t?saveConfigurationToServer():"menuSaveAsConfig"===t?$("#save-configuration").modal("show"):"menuEv3"===t?newProgram()&&switchRobot("ev3"):"menuSim"===t?newProgram()&&switchRobot("oraSim"):"menuConnect"===t?($("#buttonCancelFirmwareUpdate").css("display","inline"),$("#buttonCancelFirmwareUpdateAndRun").css("display","none"),$("#set-token").modal("show")):"menuRobotInfo"===t?showRobotInfo():"menuGeneral"===t?window.open("https://mp-devel.iais.fraunhofer.de/wiki/x/BIAM"):"menuEV3conf"===t?window.open("https://mp-devel.iais.fraunhofer.de/wiki/x/RIAd"):"menuProgramming"===t?window.open("https://mp-devel.iais.fraunhofer.de/wiki/x/CwA-/"):"menuFaq"===t?window.open("https://mp-devel.iais.fraunhofer.de/wiki/x/BoAd"):"menuShowRelease"===t?$("#show-release").modal("show"):"menuStateInfo"===t?showUserInfo():"menuAbout"===t?($("#version").text(userState.version),$("#show-about").modal("show")):"menuLogging"===t?(deactivateProgConfigMenu(),$("#tabs").css("display","inline"),$("#bricklyFrame").css("display","none"),$("#simConfiguration").css("display","none"),$("#tabLogging").click()):"menuLogin"===t?$("#login-user").modal("show"):"menuLogout"===t?logout():"menuNewUser"===t?$("#register-user").modal("show"):"menuChangeUser"===t||"menuDeleteUser"===t&&$("#delete-user").modal("show"),!1},"head navigation menu item clicked"),$(".navbar-fixed-top .navbar-nav").onWrap("click","li:not(.disabled) a",function(e){var t=e.target.id;return"menuTabProgram"===t?($("#tabSimulation").hasClass("tabClicked")&&$(".scroller-left").click(),$(".scroller-left").click(),$("#tabProgram").click()):"menuTabConfiguration"===t&&($("#tabProgram").hasClass("tabClicked")?$(".scroller-right").click():$("#tabConfiguration").hasClass("tabClicked")&&$(".scroller-right").click(),$("#tabConfiguration").click()),!1}),$(".navbar-fixed-top").onWrap("mouseleave",function(){$(".navbar-fixed-top .dropdown").removeClass("open")}),$("#imgLogo, #imgBeta").onWrap("click",function(){window.open("http://open-roberta.org")},"logo was clicked"),$("#beta").onWrap("click",function(){window.open("http://open-roberta.org")},"beta logo was clicked"),$("#iconDisplayLogin").onWrap("click",function(){showUserInfo()},"icon user click"),$("#iconDisplayRobotState").onWrap("click",function(){showRobotInfo()},"icon robot click"),$("#tabProgram").onWrap("click",function(){activateProgConfigMenu(),$("#tabProgram").addClass("tabClicked"),$("#tabConfiguration").removeClass("tabClicked"),$("#tabSimulation").removeClass("tabClicked"),$("#head-navigation-program-edit").css("display","inline"),$("#head-navigation-configuration-edit").css("display","none"),$("#menuTabProgram").parent().addClass("disabled"),$("#menuTabConfiguration").parent().removeClass("disabled"),$("#menuTabSimulation").parent().removeClass("disabled"),switchToBlockly()},"tabProgram clicked"),$("#tabConfiguration").onWrap("click",function(){Blockly.hideChaff(),activateProgConfigMenu(),$("#tabProgram").removeClass("tabClicked"),$("#tabConfiguration").addClass("tabClicked"),$("#tabSimulation").removeClass("tabClicked"),$("#head-navigation-program-edit").css("display","none"),$("#head-navigation-configuration-edit").css("display","inline"),$("#menuTabProgram").parent().removeClass("disabled"),$("#menuTabConfiguration").parent().addClass("disabled"),$("#menuTabSimulation").parent().removeClass("disabled"),switchToBrickly()},"tabConfiguration clicked"),$(".simSimple").onWrap("click",function(){$(".menuSim").parent().removeClass("disabled"),$(".simSimple").parent().addClass("disabled"),SIM.setBackground(1),$("#simButtonsCollapse").collapse("hide")},"simSimple clicked"),$(".simDraw").onWrap("click",function(){$(".menuSim").parent().removeClass("disabled"),$(".simDraw").parent().addClass("disabled"),SIM.setBackground(2),$("#simButtonsCollapse").collapse("hide")},"simDraw clicked"),$(".simRoberta").onWrap("click",function(){$(".menuSim").parent().removeClass("disabled"),$(".simRoberta").parent().addClass("disabled"),SIM.setBackground(3),$("#simButtonsCollapse").collapse("hide")},"simRoberta clicked"),$(".simRescue").onWrap("click",function(){$(".menuSim").parent().removeClass("disabled"),$(".simRescue").parent().addClass("disabled"),SIM.setBackground(4),$("#simButtonsCollapse").collapse("hide")},"simRescue clicked"),$(".simMath").onWrap("click",function(){$(".menuSim").parent().removeClass("disabled"),$(".simMath").parent().addClass("disabled"),SIM.setBackground(5),$("#simButtonsCollapse").collapse("hide")},"simRescue clicked"),$(".simBack").onWrap("click",function(){SIM.cancel(),$("#blocklyDiv").removeClass("simActive"),$("#simDiv").removeClass("simActive"),$(".sim").addClass("hide"),Blockly.fireUiEvent(window,"resize"),$(".nav > li > ul > .robotType").removeClass("disabled"),$("#menuSim").parent().addClass("disabled"),COMM.json("/toolbox",{cmd:"loadT",name:userState.toolbox,owner:" "},function(e){injectBlockly(e,userState.programBlocksSaved)}),$("#simButtonsCollapse").collapse("hide"),$("#head-navi-tooltip-program").removeClass("disabled"),$("#head-navigation-program-edit").removeClass("disabled"),$("#head-navigation-program-edit>ul").removeClass("hidden")
},"simBack clicked"),$(".simStop").onWrap("click",function(){SIM.stopProgram(),$("#simButtonsCollapse").collapse("hide")},"simStop clicked"),$(".simForward").onWrap("click",function(){SIM.setPause($(".simForward").hasClass("typcn-media-play")?!1:!0),$("#simButtonsCollapse").collapse("hide")},"simForward clicked"),$(".simStep").onWrap("click",function(){SIM.setStep(),$("#simButtonsCollapse").collapse("hide")},"simStep clicked"),$(".simInfo").onWrap("click",function(){SIM.setInfo(),$("#simButtonsCollapse").collapse("hide")},"simInfo clicked"),$(".simScene").onWrap("click",function(){SIM.setBackground(0);var e=$("#simButtonsCollapse").collapse("hide");$(".menuSim").parent().removeClass("disabled"),1==e?$(".simSimple").parent().addClass("disabled"):2==e?$(".simDraw").parent().addClass("disabled"):3==e?$(".simRoberta").parent().addClass("disabled"):4==e?$(".simRescue").parent().addClass("disabled"):5==e&&$(".simMath").parent().addClass("disabled")},"simScene clicked"),$("#startSim").onWrap("click",function(){switchRobot("oraSim")},"start with simulation clicked"),$("#startEV3").onWrap("click",function(){switchRobot("ev3")},"start with ev3 clicked"),$(".codeBack").onWrap("click",function(){$("#blocklyDiv").removeClass("codeActive"),$("#codeDiv").removeClass("codeActive"),"oraSim"===userState.robot?$("#menuEv3").parent().removeClass("disabled"):$("#menuSim").parent().removeClass("disabled"),Blockly.fireUiEvent(window,"resize"),COMM.json("/toolbox",{cmd:"loadT",name:userState.toolbox,owner:" "},function(e){injectBlockly(e,userState.programBlocksSaved)}),$("#head-navi-tooltip-program").removeClass("disabled"),$("#head-navigation-program-edit").removeClass("disabled"),$("#head-navigation-program-edit>ul").removeClass("hidden"),$(".code").addClass("hide")},"codeBack clicked"),$("#codeDownload").onWrap("click",function(){var e=new Blob([userState.programCode]),t=document.createElement("a"),o=window.URL||window.webkitURL;t.setAttribute("href",o.createObjectURL(e)),t.setAttribute("download",userState.program+".java"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},"codeDownload clicked"),$(".newRelease").onWrap("click",function(){$("#show-release").modal("show")},"show release clicked")}function initPopups(){$("#saveUser").onWrap("click",saveUserToServer),$("#deleteUser").onWrap("click",deleteUserOnServer),$("#doLogin").onWrap("click",login),$("#saveProgram").onWrap("click",saveAsProgramToServer),$("#saveConfiguration").onWrap("click",saveAsConfigurationToServer),$("#shareProgram").onWrap("click",function(){shareProgramsFromListing()},"share program"),$("#setToken").onWrap("click",function(){setToken($("#tokenValue").val())},"set token"),$(".cancelPopup").onWrap("click",function(){$(".ui-dialog-titlebar-close").click()}),$("#about-join").onWrap("click",function(){$("#show-about").modal("hide")}),$("#login-user").onWrap("hidden.bs.modal",function(){$("#login-user input :not(btn)").val("")}),$("#delete-user").onWrap("hidden.bs.modal",function(){$("#delete-user input :not(btn)").val("")}),$("#register-user").onWrap("hidden.bs.modal",function(){$("#register-user input :not(btn)").val(""),$("#login-user input :not(btn)").val("")}),$("#buttonCancelFirmwareUpdateAndRun").onWrap("click",function(){startProgram()}),$("#doUpdateFirmware").onWrap("click",function(){$("#set-token").modal("hide"),$("#confirmUpdateFirmware").modal("hide"),updateFirmware()},"update firmware of robot"),$(".modal").keyup(function(e){if(e.keyCode===$.ui.keyCode.BACKSPACE&&"password"===e.target.type&&$("#"+e.target.id).val().length>0){var t=$("#"+e.target.id).val().length-1,o=$("#"+e.target.id).val().substring(0,t);$("#"+e.target.id).val(o)}27==e.keyCode&&window.close(),13==e.keyCode&&$(this).find(".modal-footer button:first").click(),e.stopPropagation()})}function initTabs(){$("#tabs").tabs({heightStyle:"content",active:0,beforeActivate:beforeActivateTab}),$("#loadFromListing").onWrap("click",function(){activateProgConfigMenu(),loadFromListing()},"load blocks from program list"),$("#loadConfigurationFromListing").onWrap("click",function(){activateProgConfigMenu(),loadConfigurationFromListing()},"load configuration from configuration list"),$("#deleteFromListing").onWrap("click",function(){var e=$("#programNameTable .selected");if(e.length>0){for(var t="",o=0;o<e.length;o++)t+=e[o].children[0].textContent+"</br>";$("#confirmDeleteProgramName").html(t),$("#confirmDeleteProgram").modal("show")}},"Ask for confirmation to delete programs"),$("#doDeleteProgram").onWrap("click",function(){deleteFromListing()},"delete program"),$("#deleteConfigurationFromListing").onWrap("click",function(){$("#configurationNameTable .selected").length>0&&$("#confirmDeleteConfiguration").modal("show")},"Ask for confirmation to delete a configuration"),$("#doDeleteConfiguration").onWrap("click",function(){deleteConfigurationFromListing(),$(".modal").modal("hide")},"delete configuration from configurations list"),$("#shareFromListing").onWrap("click",function(){var e=$("#programNameTable .selected");if(e.length>0){var t=e[0].children[2].textContent;if("X"===t||"-"===t){var o=e[0].children[0].textContent,a=Blockly.Msg.BUTTON_DO_SHARE+" ("+o+")";$("#headShare").text(a),$("#programShareWith :not(btn)").val(""),$("#read").prop("checked",!0),$("#write").prop("checked",!1),PROGRAM.refreshProgramRelationsList(o,showRelations)}}},"show relations of program"),$("#refreshListing").onWrap("click",function(){PROGRAM.refreshList(showPrograms)},"refresh list of programs"),$("#backConfiguration").onWrap("click",function(){activateProgConfigMenu(),switchToBrickly()}),$("#backProgram").onWrap("click",function(){activateProgConfigMenu(),switchToBlockly()}),$("#backLogging").onWrap("click",function(){activateProgConfigMenu(),bricklyActive?switchToBrickly():switchToBlockly()})}function initLogging(){$("#clearLog").onWrap("click",function(){$("#log li").remove()},"clear LOG list")}function setRobotState(e){e.version&&(userState.version=e.version),e["server.version"]&&(userState.serverVersion=e["server.version"]),e["robot.version"]&&(userState.robotVersion=e["robot.version"]),userState.robotWait=void 0!=e["robot.wait"]?e["robot.wait"]:"",userState.robotBattery=void 0!=e["robot.battery"]?e["robot.battery"]:"",userState.robotName=void 0!=e["robot.name"]?e["robot.name"]:"",userState.robotState=void 0!=e["robot.state"]?e["robot.state"]:"",userState.accountName?($("#iconDisplayLogin").removeClass("error"),$("#iconDisplayLogin").addClass("ok")):($("#iconDisplayLogin").removeClass("ok"),$("#iconDisplayLogin").addClass("error")),"wait"===userState.robotState?($("#iconDisplayRobotState").removeClass("error"),$("#iconDisplayRobotState").removeClass("busy"),$("#iconDisplayRobotState").addClass("wait"),Blockly.hasStartButton&&Blockly.getMainWorkspace().startButton.enable()):"busy"===userState.robotState?($("#iconDisplayRobotState").removeClass("wait"),$("#iconDisplayRobotState").removeClass("error"),$("#iconDisplayRobotState").addClass("busy")):($("#iconDisplayRobotState").removeClass("busy"),$("#iconDisplayRobotState").removeClass("wait"),$("#iconDisplayRobotState").addClass("error"))}function translate(){$("[lkey]").each(function(){var e=$(this).attr("lkey"),t=e.replace("Blockly.Msg.",""),o=Blockly.Msg[t];void 0==o&&console.log("UNDEFINED    key : value = "+t+" : "+o),"Blockly.Msg.MENU_LOG_IN"===e?($("#login-user h3").text(o),$(this).html(o)):"Blockly.Msg.MENU_NEW"===e?($("#register-user h3").text(o),$(this).html(o)):"Blockly.Msg.MENU_DELETE_USER"===e?($("#delete-user h3").text(o),$(this).html(o)):"Blockly.Msg.MENU_SAVE_AS"===e?($("#save-program h3").text(o),$("#save-configuration h3").text(o),$(this).html(o)):"Blockly.Msg.MENU_CONNECT"===e?($("#set-token h3").text(o),$(this).html(o)):"Blockly.Msg.POPUP_HIDE_STARTUP_MESSAGE"===e?$("#hideStartupMessage").text(o):"Blockly.Msg.POPUP_TEXT_STARTUP_MESSAGE"===e?$("#popupTextStartupMessage").html(o):"Blockly.Msg.POPUP_ATTENTION"===e?($("#show-message h3").text(o),$("#show-startup-message h3").text(o)):"Blockly.Msg.POPUP_CANCEL"===e?($(".cancelPopup").attr("value",o),$(".backButton").attr("value",o)):"Blockly.Msg.POPUP_ABOUT_JOIN"===e?$("#about-join").html(o):"Blockly.Msg.BUTTON_LOAD"===e?$(".buttonLoad").attr("value",o):"Blockly.Msg.BUTTON_DO_DELETE"===e?$(".buttonDelete").attr("value",o):"Blockly.Msg.BUTTON_DO_SHARE"===e?($(".buttonShare").attr("value",o),$("#show-relations h2").text(o)):"Blockly.Msg.BUTTON_REFRESH"===e?$(".buttonRefresh").attr("value",o):"Blockly.Msg.BUTTON_EMPTY_LIST"===e?$("#clearLog").attr("value",o):"Blockly.Msg.MENU_ROBOT_STATE_INFO"===e?($("#show-robot-info h3").text(o),$(this).html(o)):"Blockly.Msg.MENU_STATE_INFO"===e?($("#show-state-info h3").text(o),$(this).html(o)):"Blockly.Msg.MENU_ABOUT"===e?($("#show-about h3").text(o),$(this).html(o)):"Blockly.Msg.MENU_TITLE_EDIT"===e?($("#head-navi-tooltip-program").attr("data-original-title",o).tooltip("fixTitle"),$("#head-navi-tooltip-configuration").attr("data-original-title",o).tooltip("fixTitle")):"Blockly.Msg.MENU_TITLE_ROBOT"===e?$("#head-navi-tooltip-robot").attr("data-original-title",o).tooltip("fixTitle"):"Blockly.Msg.MENU_TITLE_HELP"===e?$("#head-navi-tooltip-help").attr("data-original-title",o).tooltip("fixTitle"):"Blockly.Msg.MENU_TITLE_USER"===e?$("#head-navi-tooltip-user").attr("data-original-title",o).tooltip("fixTitle"):"Blockly.Msg.MENU_TITLE_USER_STATE"===e?$("#iconDisplayLogin").attr("data-original-title",o).tooltip("fixTitle"):"Blockly.Msg.MENU_TITLE_ROBOT_STATE"===e?$("#iconDisplayRobotState").attr("data-original-title",o).tooltip("fixTitle"):$(this).html(o)})}function switchLanguage(e,t){if(t||userState.language!=e){var o=["DE","EN","FI","DA","ES"];for(o.indexOf(e)<0&&(e="EN"),i=0;i<o.length;i++)$("."+o[i]).css("display","none");$("."+e).css("display","inline"),userState.language=e;var a="blockly/msg/js/"+e.toLowerCase()+".js",n=$.getScript(a);n.then(function(e){switchLanguageInBlockly(),UTIL.getBricklyFrame("#bricklyFrame").eval(e),UTIL.getBricklyFrame("#bricklyFrame").switchLanguageInBrickly()})}}function switchLanguageInBlockly(){translate();var e=null;if(null!==Blockly.mainWorkspace){var t=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);e=Blockly.Xml.domToText(t)}loadToolbox(userState.toolbox),initProgramEnvironment(e)}function initializeLanguages(){var e;return navigator.language.indexOf("de")>-1?(e="DE",$("#chosenLanguage").text("DE")):navigator.language.indexOf("fi")>-1?(e="FI",$("#chosenLanguage").text("FI")):navigator.language.indexOf("da")>-1?(e="DA",$("#chosenLanguage").text("DA")):navigator.language.indexOf("es")>-1?(e="ES",$("#chosenLanguage").text("ES")):(e="EN",$("#chosenLanguage").text("EN")),$("#language").on("click",".dropdown-menu li a",function(){var e=$(this).text();$("#chosenLanguage").text(e),switchLanguage(e,!1)}),e}function displayInformation(e,t,o,a){"ok"===e.rc?($(".modal").modal("hide"),displayMessage(t,"TOAST",a)):displayMessage(o,"POPUP",a)}function displayMessage(e,t,o){if(void 0!=e){(e.indexOf(".")>=0||e.toUpperCase()!=e)&&LOG.info("Invalid message-key received: "+e);var a="Blockly.Msg."+e,n=Blockly.Msg[e];(void 0===n||""===n)&&(n=e),n.indexOf("$")>=0&&(n=n.replace("$",o)),"POPUP"===t?displayPopupMessage(a,n):"TOAST"===t&&(toastMessages.unshift(n),1===toastMessages.length&&displayToastMessages())}}function displayPopupMessage(e,t){$("#message").attr("lkey",e),$("#message").html(t),$("#show-message").modal("show")}function displayToastMessages(){$("#toastText").text(toastMessages[toastMessages.length-1]),$("#toastContainer").delay(100).fadeIn("slow",function(){$(this).delay(1e3).fadeOut("slow",function(){toastMessages.pop(),toastMessages.length>0&&displayToastMessages()})})}function activateProgConfigMenu(){$("#head-navigation-program-edit > ul > li").removeClass("disabled"),$("#head-navigation-configuration-edit > ul > li").removeClass("disabled"),setHeadNavigationMenuState(-1===userState.id?"logout":"login"),userState.programSaved&&($("#menuSaveProg").parent().removeClass("login"),$("#menuSaveProg").parent().removeClass("disabled"),Blockly.getMainWorkspace().saveButton.enable()),userState.configurationSaved&&($("#menuSaveConfig").parent().removeClass("login"),$("#menuSaveConfig").parent().removeClass("disabled"),UTIL.getBricklyFrame("#bricklyFrame").Blockly.getMainWorkspace().saveButton.enable())}function deactivateProgConfigMenu(){$("#head-navigation-program-edit > ul > li").addClass("disabled"),$("#head-navigation-configuration-edit > ul > li").addClass("disabled")}function pingServer(){COMM.ping(function(e){setRobotState(e)})}function handleServerErrors(){LOG.info("network changed")}function setWorkspaceModified(e){userState.programModified=e}function initBlockly(){if(userState.bricklyReady&&userState.blocklyReady){var e=initializeLanguages();switchLanguage(e,!0)}else setTimeout(function(){initBlockly()},100)}function startPopup(){userState.blocklyTranslated&&userState.bricklyTranslated?$("#show-startup-message").modal("show"):setTimeout(function(){startPopup()},100)}function init(){COMM.setErrorFn(handleServerErrors),initLogging(),initUserState(),$("#tabProgramName").text(userState.program),$("#tabConfigurationName").text(userState.configuration),initTabs(),initPopups(),initHeadNavigation(),setHeadNavigationMenuState("logout"),UTIL.initDataTables(),initProgramNameTable(),initConfigurationNameTable(),initRelationsTable(),$("#menuTabProgram").parent().addClass("disabled"),$("#tabProgram").addClass("tabClicked"),$("#head-navigation-configuration-edit").css("display","none"),$(".modal").on("shown.bs.modal",function(){$(this).find("[autofocus]").focus()}),$(window).on("beforeunload",function(){return userState.programModified||userState.configurationModified?-1===userState.id?Blockly.Msg.POPUP_BEFOREUNLOAD:Blöockly.Msg.POPUP_BEFOREUNLOAD_LOGGEDIN:void 0}),$('[rel="tooltip"]').tooltip({placement:"right"}),UTIL.checkVisibility(function(){var e=UTIL.checkVisibility();LOG.info("this tab visible: "+e),e||SIM.setPause(!0)}),initRobot(),COMM.json("/toolbox",{cmd:"loadT",name:userState.toolbox,owner:" "},function(e){injectBlockly(e)}),initBlockly(),startPopup();setInterval(function(){pingServer()},5e3)}var USER={};!function(){USER.clear=function(e){COMM.json("/user",{cmd:"clear"},e,"clear user")},USER.login=function(e,t,o){COMM.json("/user",{cmd:"login",accountName:e,password:t},o,"login user '"+e+"'")},USER.logout=function(e){COMM.json("/user",{cmd:"logout"},e,"logout user")},USER.saveUserToServer=function(e,t,o,a,n){COMM.json("/user",{cmd:"createUser",accountName:e,userName:t,userEmail:o,password:a,role:"TEACHER"},n,"save user '"+e+"' to server")},USER.deleteUserOnServer=function(e,t,o){COMM.json("/user",{cmd:"deleteUser",accountName:e,password:t},o,"delete user '"+e+"' on server")}}($);var ROBOT={};!function(){ROBOT.updateFirmware=function(e){COMM.json("/admin",{cmd:"updateFirmware"},e,"update firmware")},ROBOT.setToken=function(e,t){COMM.json("/admin",{cmd:"setToken",token:e},t,"set token '"+e+"'")},ROBOT.setRobot=function(e,t){COMM.json("/admin",{cmd:"setRobot",robot:e},t,"set robot '"+e+"'")}}($);var CONFIGURATION={};!function(){CONFIGURATION.saveAsConfigurationToServer=function(e,t,o){COMM.json("/conf",{cmd:"saveAsC",name:e,configuration:t},o,"save configuration to server with new name "+e)},CONFIGURATION.saveConfigurationToServer=function(e,t,o){COMM.json("/conf",{cmd:"saveC",name:e,configuration:t},o,"save configuration "+e+" to server")},CONFIGURATION.deleteConfigurationFromListing=function(e,t){COMM.json("/conf",{cmd:"deleteC",name:e},t,"delete configuration "+e)},CONFIGURATION.loadConfigurationFromListing=function(e,t){COMM.json("/conf",{cmd:"loadC",name:e,owner:userState.accountName},t,"load configuration "+e)},CONFIGURATION.refreshList=function(e){COMM.json("/conf",{cmd:"loadCN"},e,"refresh configuration list")}}($);var UTIL={};!function(e){UTIL.setCookie=function(e,t){var o=new Date;o.setTime(o.getTime()+2592e6),document.cookie=e+"="+t+";expires="+o.toUTCString()},UTIL.getCookie=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null},UTIL.formatDate=function(e){return e?moment(e).format("DD.MM.YYYY, HH:mm:ss"):""},UTIL.formatDateComplete=function(e){return e?moment(e).format("DD.MM.YYYY, HH:mm:ss.SSS"):""},UTIL.parseDate=function(e){if(e){var t=e.split(", ")[0],o=e.split(", ")[1],a=t.split(".")[0],n=t.split(".")[1]-1,r=t.split(".")[2],i=o.split(":")[0],s=o.split(":")[1],l=o.split(":")[2],c=o.split(".")[1],u=new Date(r,n,a,i,s,l,c);return u.getTime()}return 0},UTIL.formatResultLog=function(e){var t="{",o=!1;for(key in e)o?t+=",":o=!0,t+='"'+key+'":',e.hasOwnProperty(key)&&(t+=e[key].length>100?'"'+JSON.stringify(e[key]).substring(1,100)+' ..."':JSON.stringify(e[key]));return t+="}"},UTIL.initDataTables=function(){jQuery.extend(jQuery.fn.dataTableExt.oSort["date-de-asc"]=function(e,t){return e=UTIL.parseDate(e),t=UTIL.parseDate(t),t>e?-1:e>t?1:0},jQuery.fn.dataTableExt.oSort["date-de-desc"]=function(e,t){return e=UTIL.parseDate(e),t=UTIL.parseDate(t),t>e?1:e>t?-1:0})},UTIL.calcDataTableHeight=function(){return Math.round(e(window).height()-260)},UTIL.cacheBlocks=function(){if(userState.programBlocksSaved=null,userState.programBlocks=null,null!==Blockly.mainWorkspace){var e=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);userState.programBlocksSaved=Blockly.Xml.domToText(e);for(var t=Blockly.getMainWorkspace().getTopBlocks(),o=0;o<t.length;o++)if("robControls_start"==t[o].type){var a=t[o].getRelativeToSurfaceXY();t[o].moveBy(25-a.x,25-a.y);break}e=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),userState.programBlocks=Blockly.Xml.domToText(e);for(var t=Blockly.getMainWorkspace().getTopBlocks(),o=0;o<t.length;o++)if("robControls_start"==t[o].type){var a=t[o].getRelativeToSurfaceXY();t[o].moveBy(25-a.x,25-a.y);break}}},UTIL.checkVisibility=function(){var e,t,o={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in o)if(e in document){t=o[e];break}return function(o){return o&&document.addEventListener(t,o),!document[e]}},UTIL.getBricklyFrame=function(t){var o,a=e(t).get(0);return a.contentWindow?a.contentWindow:a.window?a.window:(!o&&a.contentDocument&&(o=a.contentDocument),!o&&a.document&&(o=a.document),o&&o.defaultView?o.defaultView:o&&o.parentWindow?o.parentWindow:void 0)}}($);var PROGRAM={};!function(){PROGRAM.saveAsProgramToServer=function(e,t,o,a){COMM.json("/program",{cmd:"saveAsP",name:e,timestamp:t,program:o},a,"save program to server with new name '"+e+"'")},PROGRAM.saveProgramToServer=function(e,t,o,a,n){COMM.json("/program",{cmd:"saveP",name:e,shared:t,timestamp:o,program:a},n,"save program '"+e+"' to server")},PROGRAM.shareProgram=function(e,t,o,a){COMM.json("/program",{cmd:"shareP",programName:e,userToShare:t,right:o},a,"share program '"+e+"' with user '"+t+"' having right '"+o+"'")},PROGRAM.deleteShare=function(e,t,o){COMM.json("/program",{cmd:"shareDelete",programName:e,owner:t},function(t){o(t,e)},"delete share program '"+e+"' owner: "+t)},PROGRAM.deleteProgramFromListing=function(e,t){COMM.json("/program",{cmd:"deleteP",name:e},function(o){t(o,e)},"delete program '"+e+"'")},PROGRAM.loadProgramFromListing=function(e,t,o){COMM.json("/program",{cmd:"loadP",name:e,owner:t},o,"load program '"+e+"' owned by '"+t+"'")},PROGRAM.refreshList=function(e){COMM.json("/program",{cmd:"loadPN"},e,"refresh program list")},PROGRAM.showJavaProgram=function(e,t,o,a,n){COMM.json("/program",{cmd:"showJavaP",name:e,configuration:t,programText:o,configurationText:a},n,"show Java program '"+e)},PROGRAM.runOnBrick=function(e,t,o,a,n){COMM.json("/program",{cmd:"runP",name:e,configuration:t,programText:o,configurationText:a},n,"run program '"+e+"' with configuration '"+t+"'")},PROGRAM.refreshProgramRelationsList=function(e,t){COMM.json("/program",{cmd:"loadPR",name:e},t,"refresh program relations list")},PROGRAM.checkProgramCompatibility=function(e,t,o,a,n){COMM.json("/program",{cmd:"checkP",name:e,configuration:t,programText:o,configurationText:a},n,"check program '"+e+"' with configuration '"+t+"'")}}($);var bricklyActive=!1,userState={},toastMessages=[],id,newProgram=function(){return userState.programModified?(-1===userState.id?displayMessage("POPUP_BEFOREUNLOAD","POPUP",""):displayMessage("POPUP_BEFOREUNLOAD_LOGGEDIN","POPUP",""),userState.programModified=!1,!1):(setProgram("NEPOprog"),userState.programShared=!1,userState.programTimestamp="",initProgramEnvironment(),$("#tabProgram").click(),$("#menuSaveProg").parent().addClass("disabled"),Blockly.getMainWorkspace().saveButton.disable(),!0)},start;$(document).ready(WRAP.fn3(init,"page init")),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Ra.apply(null,arguments)}function t(e){Ra=e}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function n(e,t){var o,a=[];for(o=0;o<e.length;++o)a.push(t(e[o],o));return a}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e,t){for(var o in t)r(t,o)&&(e[o]=t[o]);return r(t,"toString")&&(e.toString=t.toString),r(t,"valueOf")&&(e.valueOf=t.valueOf),e}function s(e,t,o,a){return Dt(e,t,o,a,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(e){return null==e._pf&&(e._pf=l()),e._pf}function u(e){if(null==e._isValid){var t=c(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=s(0/0);return null!=e?i(c(t),e):c(t).userInvalidated=!0,t}function m(e,t){var o,a,n;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=c(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ua.length>0)for(o in Ua)a=Ua[o],n=t[a],"undefined"!=typeof n&&(e[a]=n);return e}function f(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():0/0),Ia===!1&&(Ia=!0,e.updateOffset(this),Ia=!1)}function g(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function h(e){return 0>e?Math.ceil(e):Math.floor(e)}function p(e){var t=+e,o=0;return 0!==t&&isFinite(t)&&(o=h(t)),o}function y(e,t,o){var a,n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0;for(a=0;n>a;a++)(o&&e[a]!==t[a]||!o&&p(e[a])!==p(t[a]))&&i++;return i+r}function v(){}function S(e){return e?e.toLowerCase().replace("_","-"):e}function k(e){for(var t,o,a,n,r=0;r<e.length;){for(n=S(e[r]).split("-"),t=n.length,o=S(e[r+1]),o=o?o.split("-"):null;t>0;){if(a=b(n.slice(0,t).join("-")))return a;if(o&&o.length>=t&&y(n,o,!0)>=t-1)break;t--}r++}return null}function b(e){var t=null;if(!Na[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=La._abbr,require("./locale/"+e),T(t)}catch(o){}return Na[e]}function T(e,t){var o;return e&&(o="undefined"==typeof t?M(e):_(e,t),o&&(La=o)),La._abbr}function _(e,t){return null!==t?(t.abbr=e,Na[e]=Na[e]||new v,Na[e].set(t),T(e),Na[e]):(delete Na[e],null)}function M(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return La;if(!o(e)){if(t=b(e))return t;e=[e]}return k(e)}function C(e,t){var o=e.toLowerCase();xa[o]=xa[o+"s"]=xa[t]=e}function w(e){return"string"==typeof e?xa[e]||xa[e.toLowerCase()]:void 0}function $(e){var t,o,a={};for(o in e)r(e,o)&&(t=w(o),t&&(a[t]=e[o]));return a}function D(t,o){return function(a){return null!=a?(P(this,t,a),e.updateOffset(this,o),this):O(this,t)}}function O(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function P(e,t,o){return e._d["set"+(e._isUTC?"UTC":"")+t](o)}function E(e,t){var o;if("object"==typeof e)for(o in e)this.set(o,e[o]);else if(e=w(e),"function"==typeof this[e])return this[e](t);return this}function B(e,t,o){var a=""+Math.abs(e),n=t-a.length,r=e>=0;return(r?o?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+a}function A(e,t,o,a){var n=a;"string"==typeof a&&(n=function(){return this[a]()}),e&&(Ga[e]=n),t&&(Ga[t[0]]=function(){return B(n.apply(this,arguments),t[1],t[2])}),o&&(Ga[o]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function R(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function L(e){var t,o,a=e.match(Wa);for(t=0,o=a.length;o>t;t++)a[t]=Ga[a[t]]?Ga[a[t]]:R(a[t]);return function(n){var r="";for(t=0;o>t;t++)r+=a[t]instanceof Function?a[t].call(n,e):a[t];return r}}function U(e,t){return e.isValid()?(t=I(t,e.localeData()),Fa[t]=Fa[t]||L(t),Fa[t](e)):e.localeData().invalidDate()}function I(e,t){function o(e){return t.longDateFormat(e)||e}var a=5;for(Ya.lastIndex=0;a>=0&&Ya.test(e);)e=e.replace(Ya,o),Ya.lastIndex=0,a-=1;return e}function N(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function x(e,t,o){nn[e]=N(t)?t:function(e){return e&&o?o:t}}function W(e,t){return r(nn,e)?nn[e](t._strict,t._locale):new RegExp(Y(e))}function Y(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,o,a,n){return t||o||a||n}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function F(e,t){var o,a=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(a=function(e,o){o[t]=p(e)}),o=0;o<e.length;o++)rn[e[o]]=a}function G(e,t){F(e,function(e,o,a,n){a._w=a._w||{},t(e,a._w,a,n)})}function H(e,t,o){null!=t&&r(rn,e)&&rn[e](t,o._a,o,e)}function j(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function z(e){return this._months[e.month()]}function V(e){return this._monthsShort[e.month()]}function X(e,t,o){var a,n,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;12>a;a++){if(n=s([2e3,a]),o&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),o||this._monthsParse[a]||(r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[a]=new RegExp(r.replace(".",""),"i")),o&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(o&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!o&&this._monthsParse[a].test(e))return a}}function Z(e,t){var o;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(o=Math.min(e.date(),j(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,o),e)}function J(t){return null!=t?(Z(this,t),e.updateOffset(this,!0),this):O(this,"Month")}function q(){return j(this.year(),this.month())}function Q(e){var t,o=e._a;return o&&-2===c(e).overflow&&(t=o[ln]<0||o[ln]>11?ln:o[cn]<1||o[cn]>j(o[sn],o[ln])?cn:o[un]<0||o[un]>24||24===o[un]&&(0!==o[dn]||0!==o[mn]||0!==o[fn])?un:o[dn]<0||o[dn]>59?dn:o[mn]<0||o[mn]>59?mn:o[fn]<0||o[fn]>999?fn:-1,c(e)._overflowDayOfYear&&(sn>t||t>cn)&&(t=cn),c(e).overflow=t),e}function K(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function et(e,t){var o=!0;return i(function(){return o&&(K(e+"\n"+(new Error).stack),o=!1),t.apply(this,arguments)},t)}function tt(e,t){pn[e]||(K(t),pn[e]=!0)}function ot(e){var t,o,a=e._i,n=yn.exec(a);if(n){for(c(e).iso=!0,t=0,o=vn.length;o>t;t++)if(vn[t][1].exec(a)){e._f=vn[t][0];break}for(t=0,o=Sn.length;o>t;t++)if(Sn[t][1].exec(a)){e._f+=(n[6]||" ")+Sn[t][0];break}a.match(tn)&&(e._f+="Z"),bt(e)}else e._isValid=!1}function at(t){var o=kn.exec(t._i);return null!==o?void(t._d=new Date(+o[1])):(ot(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function nt(e,t,o,a,n,r,i){var s=new Date(e,t,o,a,n,r,i);return 1970>e&&s.setFullYear(e),s}function rt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function it(e){return st(e)?366:365}function st(e){return e%4===0&&e%100!==0||e%400===0}function lt(){return st(this.year())}function ct(e,t,o){var a,n=o-t,r=o-e.day();return r>n&&(r-=7),n-7>r&&(r+=7),a=Ot(e).add(r,"d"),{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function ut(e){return ct(e,this._week.dow,this._week.doy).week}function dt(){return this._week.dow}function mt(){return this._week.doy}function ft(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function gt(e){var t=ct(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ht(e,t,o,a,n){var r,i=6+n-a,s=rt(e,0,1+i),l=s.getUTCDay();return n>l&&(l+=7),o=null!=o?1*o:n,r=1+i+7*(t-1)-l+o,{year:r>0?e:e-1,dayOfYear:r>0?r:it(e-1)+r}}function pt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function yt(e,t,o){return null!=e?e:null!=t?t:o}function vt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function St(e){var t,o,a,n,r=[];if(!e._d){for(a=vt(e),e._w&&null==e._a[cn]&&null==e._a[ln]&&kt(e),e._dayOfYear&&(n=yt(e._a[sn],a[sn]),e._dayOfYear>it(n)&&(c(e)._overflowDayOfYear=!0),o=rt(n,0,e._dayOfYear),e._a[ln]=o.getUTCMonth(),e._a[cn]=o.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=r[t]=a[t];for(;7>t;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[un]&&0===e._a[dn]&&0===e._a[mn]&&0===e._a[fn]&&(e._nextDay=!0,e._a[un]=0),e._d=(e._useUTC?rt:nt).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[un]=24)}}function kt(e){var t,o,a,n,r,i,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(r=1,i=4,o=yt(t.GG,e._a[sn],ct(Ot(),1,4).year),a=yt(t.W,1),n=yt(t.E,1)):(r=e._locale._week.dow,i=e._locale._week.doy,o=yt(t.gg,e._a[sn],ct(Ot(),r,i).year),a=yt(t.w,1),null!=t.d?(n=t.d,r>n&&++a):n=null!=t.e?t.e+r:r),s=ht(o,a,n,i,r),e._a[sn]=s.year,e._dayOfYear=s.dayOfYear}function bt(t){if(t._f===e.ISO_8601)return void ot(t);t._a=[],c(t).empty=!0;var o,a,n,r,i,s=""+t._i,l=s.length,u=0;for(n=I(t._f,t._locale).match(Wa)||[],o=0;o<n.length;o++)r=n[o],a=(s.match(W(r,t))||[])[0],a&&(i=s.substr(0,s.indexOf(a)),i.length>0&&c(t).unusedInput.push(i),s=s.slice(s.indexOf(a)+a.length),u+=a.length),Ga[r]?(a?c(t).empty=!1:c(t).unusedTokens.push(r),H(r,a,t)):t._strict&&!a&&c(t).unusedTokens.push(r);c(t).charsLeftOver=l-u,s.length>0&&c(t).unusedInput.push(s),c(t).bigHour===!0&&t._a[un]<=12&&t._a[un]>0&&(c(t).bigHour=void 0),t._a[un]=Tt(t._locale,t._a[un],t._meridiem),St(t),Q(t)}function Tt(e,t,o){var a;return null==o?t:null!=e.meridiemHour?e.meridiemHour(t,o):null!=e.isPM?(a=e.isPM(o),a&&12>t&&(t+=12),a||12!==t||(t=0),t):t}function _t(e){var t,o,a,n,r;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(0/0));for(n=0;n<e._f.length;n++)r=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],bt(t),u(t)&&(r+=c(t).charsLeftOver,r+=10*c(t).unusedTokens.length,c(t).score=r,(null==a||a>r)&&(a=r,o=t));i(e,o||t)}function Mt(e){if(!e._d){var t=$(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],St(e)}}function Ct(e){var t=new f(Q(wt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function wt(e){var t=e._i,n=e._f;return e._locale=e._locale||M(e._l),null===t||void 0===n&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),g(t)?new f(Q(t)):(o(n)?_t(e):n?bt(e):a(t)?e._d=t:$t(e),e))}function $t(t){var r=t._i;void 0===r?t._d=new Date:a(r)?t._d=new Date(+r):"string"==typeof r?at(t):o(r)?(t._a=n(r.slice(0),function(e){return parseInt(e,10)}),St(t)):"object"==typeof r?Mt(t):"number"==typeof r?t._d=new Date(r):e.createFromInputFallback(t)
}function Dt(e,t,o,a,n){var r={};return"boolean"==typeof o&&(a=o,o=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=n,r._l=o,r._i=e,r._f=t,r._strict=a,Ct(r)}function Ot(e,t,o,a){return Dt(e,t,o,a,!1)}function Pt(e,t){var a,n;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Ot();for(a=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](a))&&(a=t[n]);return a}function Et(){var e=[].slice.call(arguments,0);return Pt("isBefore",e)}function Bt(){var e=[].slice.call(arguments,0);return Pt("isAfter",e)}function At(e){var t=$(e),o=t.year||0,a=t.quarter||0,n=t.month||0,r=t.week||0,i=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*s,this._days=+i+7*r,this._months=+n+3*a+12*o,this._data={},this._locale=M(),this._bubble()}function Rt(e){return e instanceof At}function Lt(e,t){A(e,0,0,function(){var e=this.utcOffset(),o="+";return 0>e&&(e=-e,o="-"),o+B(~~(e/60),2)+t+B(~~e%60,2)})}function Ut(e){var t=(e||"").match(tn)||[],o=t[t.length-1]||[],a=(o+"").match(Cn)||["-",0,0],n=+(60*a[1])+p(a[2]);return"+"===a[0]?n:-n}function It(t,o){var n,r;return o._isUTC?(n=o.clone(),r=(g(t)||a(t)?+t:+Ot(t))-+n,n._d.setTime(+n._d+r),e.updateOffset(n,!1),n):Ot(t).local()}function Nt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function xt(t,o){var a,n=this._offset||0;return null!=t?("string"==typeof t&&(t=Ut(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&o&&(a=Nt(this)),this._offset=t,this._isUTC=!0,null!=a&&this.add(a,"m"),n!==t&&(!o||this._changeInProgress?to(this,Jt(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:Nt(this)}function Wt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Yt(e){return this.utcOffset(0,e)}function Ft(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Nt(this),"m")),this}function Gt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ut(this._i)),this}function Ht(e){return e=e?Ot(e).utcOffset():0,(this.utcOffset()-e)%60===0}function jt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function zt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(m(e,this),e=wt(e),e._a){var t=e._isUTC?s(e._a):Ot(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Vt(){return!this._isUTC}function Xt(){return this._isUTC}function Zt(){return this._isUTC&&0===this._offset}function Jt(e,t){var o,a,n,i=e,s=null;return Rt(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(i={},t?i[t]=e:i.milliseconds=e):(s=wn.exec(e))?(o="-"===s[1]?-1:1,i={y:0,d:p(s[cn])*o,h:p(s[un])*o,m:p(s[dn])*o,s:p(s[mn])*o,ms:p(s[fn])*o}):(s=$n.exec(e))?(o="-"===s[1]?-1:1,i={y:qt(s[2],o),M:qt(s[3],o),d:qt(s[4],o),h:qt(s[5],o),m:qt(s[6],o),s:qt(s[7],o),w:qt(s[8],o)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(n=Kt(Ot(i.from),Ot(i.to)),i={},i.ms=n.milliseconds,i.M=n.months),a=new At(i),Rt(e)&&r(e,"_locale")&&(a._locale=e._locale),a}function qt(e,t){var o=e&&parseFloat(e.replace(",","."));return(isNaN(o)?0:o)*t}function Qt(e,t){var o={milliseconds:0,months:0};return o.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(o.months,"M").isAfter(t)&&--o.months,o.milliseconds=+t-+e.clone().add(o.months,"M"),o}function Kt(e,t){var o;return t=It(t,e),e.isBefore(t)?o=Qt(e,t):(o=Qt(t,e),o.milliseconds=-o.milliseconds,o.months=-o.months),o}function eo(e,t){return function(o,a){var n,r;return null===a||isNaN(+a)||(tt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=o,o=a,a=r),o="string"==typeof o?+o:o,n=Jt(o,a),to(this,n,e),this}}function to(t,o,a,n){var r=o._milliseconds,i=o._days,s=o._months;n=null==n?!0:n,r&&t._d.setTime(+t._d+r*a),i&&P(t,"Date",O(t,"Date")+i*a),s&&Z(t,O(t,"Month")+s*a),n&&e.updateOffset(t,i||s)}function oo(e,t){var o=e||Ot(),a=It(o,this).startOf("day"),n=this.diff(a,"days",!0),r=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(t&&t[r]||this.localeData().calendar(r,this,Ot(o)))}function ao(){return new f(this)}function no(e,t){var o;return t=w("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Ot(e),+this>+e):(o=g(e)?+e:+Ot(e),o<+this.clone().startOf(t))}function ro(e,t){var o;return t=w("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Ot(e),+e>+this):(o=g(e)?+e:+Ot(e),+this.clone().endOf(t)<o)}function io(e,t,o){return this.isAfter(e,o)&&this.isBefore(t,o)}function so(e,t){var o;return t=w(t||"millisecond"),"millisecond"===t?(e=g(e)?e:Ot(e),+this===+e):(o=+Ot(e),+this.clone().startOf(t)<=o&&o<=+this.clone().endOf(t))}function lo(e,t,o){var a,n,r=It(e,this),i=6e4*(r.utcOffset()-this.utcOffset());return t=w(t),"year"===t||"month"===t||"quarter"===t?(n=co(this,r),"quarter"===t?n/=3:"year"===t&&(n/=12)):(a=this-r,n="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-i)/864e5:"week"===t?(a-i)/6048e5:a),o?n:h(n)}function co(e,t){var o,a,n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return 0>t-r?(o=e.clone().add(n-1,"months"),a=(t-r)/(r-o)):(o=e.clone().add(n+1,"months"),a=(t-r)/(o-r)),-(n+a)}function uo(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function mo(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():U(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fo(t){var o=U(this,t||e.defaultFormat);return this.localeData().postformat(o)}function go(e,t){return this.isValid()?Jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ho(e){return this.from(Ot(),e)}function po(e,t){return this.isValid()?Jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function yo(e){return this.to(Ot(),e)}function vo(e){var t;return void 0===e?this._locale._abbr:(t=M(e),null!=t&&(this._locale=t),this)}function So(){return this._locale}function ko(e){switch(e=w(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function bo(e){return e=w(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function To(){return+this._d-6e4*(this._offset||0)}function _o(){return Math.floor(+this/1e3)}function Mo(){return this._offset?new Date(+this):this._d}function Co(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wo(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function $o(){return u(this)}function Do(){return i({},c(this))}function Oo(){return c(this).overflow}function Po(e,t){A(0,[e,e.length],0,t)}function Eo(e,t,o){return ct(Ot([e,11,31+t-o]),t,o).week}function Bo(e){var t=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Ao(e){var t=ct(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Ro(){return Eo(this.year(),1,4)}function Lo(){var e=this.localeData()._week;return Eo(this.year(),e.dow,e.doy)}function Uo(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Io(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function No(e){return this._weekdays[e.day()]}function xo(e){return this._weekdaysShort[e.day()]}function Wo(e){return this._weekdaysMin[e.day()]}function Yo(e){var t,o,a;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(o=Ot([2e3,1]).day(t),a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[t]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Fo(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Io(e,this.localeData()),this.add(e-t,"d")):t}function Go(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ho(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function jo(e,t){A(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function zo(e,t){return t._meridiemParse}function Vo(e){return"p"===(e+"").toLowerCase().charAt(0)}function Xo(e,t,o){return e>11?o?"pm":"PM":o?"am":"AM"}function Zo(e,t){t[fn]=p(1e3*("0."+e))}function Jo(){return this._isUTC?"UTC":""}function qo(){return this._isUTC?"Coordinated Universal Time":""}function Qo(e){return Ot(1e3*e)}function Ko(){return Ot.apply(null,arguments).parseZone()}function ea(e,t,o){var a=this._calendar[e];return"function"==typeof a?a.call(t,o):a}function ta(e){var t=this._longDateFormat[e],o=this._longDateFormat[e.toUpperCase()];return t||!o?t:(this._longDateFormat[e]=o.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function oa(){return this._invalidDate}function aa(e){return this._ordinal.replace("%d",e)}function na(e){return e}function ra(e,t,o,a){var n=this._relativeTime[o];return"function"==typeof n?n(e,t,o,a):n.replace(/%d/i,e)}function ia(e,t){var o=this._relativeTime[e>0?"future":"past"];return"function"==typeof o?o(t):o.replace(/%s/i,t)}function sa(e){var t,o;for(o in e)t=e[o],"function"==typeof t?this[o]=t:this["_"+o]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function la(e,t,o,a){var n=M(),r=s().set(a,t);return n[o](r,e)}function ca(e,t,o,a,n){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return la(e,t,o,n);var r,i=[];for(r=0;a>r;r++)i[r]=la(e,r,o,n);return i}function ua(e,t){return ca(e,t,"months",12,"month")}function da(e,t){return ca(e,t,"monthsShort",12,"month")}function ma(e,t){return ca(e,t,"weekdays",7,"day")}function fa(e,t){return ca(e,t,"weekdaysShort",7,"day")}function ga(e,t){return ca(e,t,"weekdaysMin",7,"day")}function ha(){var e=this._data;return this._milliseconds=Jn(this._milliseconds),this._days=Jn(this._days),this._months=Jn(this._months),e.milliseconds=Jn(e.milliseconds),e.seconds=Jn(e.seconds),e.minutes=Jn(e.minutes),e.hours=Jn(e.hours),e.months=Jn(e.months),e.years=Jn(e.years),this}function pa(e,t,o,a){var n=Jt(t,o);return e._milliseconds+=a*n._milliseconds,e._days+=a*n._days,e._months+=a*n._months,e._bubble()}function ya(e,t){return pa(this,e,t,1)}function va(e,t){return pa(this,e,t,-1)}function Sa(e){return 0>e?Math.floor(e):Math.ceil(e)}function ka(){var e,t,o,a,n,r=this._milliseconds,i=this._days,s=this._months,l=this._data;return r>=0&&i>=0&&s>=0||0>=r&&0>=i&&0>=s||(r+=864e5*Sa(Ta(s)+i),i=0,s=0),l.milliseconds=r%1e3,e=h(r/1e3),l.seconds=e%60,t=h(e/60),l.minutes=t%60,o=h(t/60),l.hours=o%24,i+=h(o/24),n=h(ba(i)),s+=n,i-=Sa(Ta(n)),a=h(s/12),s%=12,l.days=i,l.months=s,l.years=a,this}function ba(e){return 4800*e/146097}function Ta(e){return 146097*e/4800}function _a(e){var t,o,a=this._milliseconds;if(e=w(e),"month"===e||"year"===e)return t=this._days+a/864e5,o=this._months+ba(t),"month"===e?o:o/12;switch(t=this._days+Math.round(Ta(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return 24*t+a/36e5;case"minute":return 1440*t+a/6e4;case"second":return 86400*t+a/1e3;case"millisecond":return Math.floor(864e5*t)+a;default:throw new Error("Unknown unit "+e)}}function Ma(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*p(this._months/12)}function Ca(e){return function(){return this.as(e)}}function wa(e){return e=w(e),this[e+"s"]()}function $a(e){return function(){return this._data[e]}}function Da(){return h(this.days()/7)}function Oa(e,t,o,a,n){return n.relativeTime(t||1,!!o,e,a)}function Pa(e,t,o){var a=Jt(e).abs(),n=mr(a.as("s")),r=mr(a.as("m")),i=mr(a.as("h")),s=mr(a.as("d")),l=mr(a.as("M")),c=mr(a.as("y")),u=n<fr.s&&["s",n]||1===r&&["m"]||r<fr.m&&["mm",r]||1===i&&["h"]||i<fr.h&&["hh",i]||1===s&&["d"]||s<fr.d&&["dd",s]||1===l&&["M"]||l<fr.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=o,Oa.apply(null,u)}function Ea(e,t){return void 0===fr[e]?!1:void 0===t?fr[e]:(fr[e]=t,!0)}function Ba(e){var t=this.localeData(),o=Pa(this,!e,t);return e&&(o=t.pastFuture(+this,o)),t.postformat(o)}function Aa(){var e,t,o,a=gr(this._milliseconds)/1e3,n=gr(this._days),r=gr(this._months);e=h(a/60),t=h(e/60),a%=60,e%=60,o=h(r/12),r%=12;var i=o,s=r,l=n,c=t,u=e,d=a,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(i?i+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var Ra,La,Ua=e.momentProperties=[],Ia=!1,Na={},xa={},Wa=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ya=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fa={},Ga={},Ha=/\d/,ja=/\d\d/,za=/\d{3}/,Va=/\d{4}/,Xa=/[+-]?\d{6}/,Za=/\d\d?/,Ja=/\d{1,3}/,qa=/\d{1,4}/,Qa=/[+-]?\d{1,6}/,Ka=/\d+/,en=/[+-]?\d+/,tn=/Z|[+-]\d\d:?\d\d/gi,on=/[+-]?\d+(\.\d{1,3})?/,an=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,nn={},rn={},sn=0,ln=1,cn=2,un=3,dn=4,mn=5,fn=6;A("M",["MM",2],"Mo",function(){return this.month()+1}),A("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),A("MMMM",0,0,function(e){return this.localeData().months(this,e)}),C("month","M"),x("M",Za),x("MM",Za,ja),x("MMM",an),x("MMMM",an),F(["M","MM"],function(e,t){t[ln]=p(e)-1}),F(["MMM","MMMM"],function(e,t,o,a){var n=o._locale.monthsParse(e,a,o._strict);null!=n?t[ln]=n:c(o).invalidMonth=e});var gn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),hn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),pn={};e.suppressDeprecationWarnings=!1;var yn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Sn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],kn=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=et("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),A(0,["YY",2],0,function(){return this.year()%100}),A(0,["YYYY",4],0,"year"),A(0,["YYYYY",5],0,"year"),A(0,["YYYYYY",6,!0],0,"year"),C("year","y"),x("Y",en),x("YY",Za,ja),x("YYYY",qa,Va),x("YYYYY",Qa,Xa),x("YYYYYY",Qa,Xa),F(["YYYYY","YYYYYY"],sn),F("YYYY",function(t,o){o[sn]=2===t.length?e.parseTwoDigitYear(t):p(t)}),F("YY",function(t,o){o[sn]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return p(e)+(p(e)>68?1900:2e3)};var bn=D("FullYear",!1);A("w",["ww",2],"wo","week"),A("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),x("w",Za),x("ww",Za,ja),x("W",Za),x("WW",Za,ja),G(["w","ww","W","WW"],function(e,t,o,a){t[a.substr(0,1)]=p(e)});var Tn={dow:0,doy:6};A("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),x("DDD",Ja),x("DDDD",za),F(["DDD","DDDD"],function(e,t,o){o._dayOfYear=p(e)}),e.ISO_8601=function(){};var _n=et("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ot.apply(null,arguments);return this>e?this:e}),Mn=et("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ot.apply(null,arguments);return e>this?this:e});Lt("Z",":"),Lt("ZZ",""),x("Z",tn),x("ZZ",tn),F(["Z","ZZ"],function(e,t,o){o._useUTC=!0,o._tzm=Ut(e)});var Cn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var wn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,$n=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Jt.fn=At.prototype;var Dn=eo(1,"add"),On=eo(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Pn=et("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});A(0,["gg",2],0,function(){return this.weekYear()%100}),A(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Po("gggg","weekYear"),Po("ggggg","weekYear"),Po("GGGG","isoWeekYear"),Po("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),x("G",en),x("g",en),x("GG",Za,ja),x("gg",Za,ja),x("GGGG",qa,Va),x("gggg",qa,Va),x("GGGGG",Qa,Xa),x("ggggg",Qa,Xa),G(["gggg","ggggg","GGGG","GGGGG"],function(e,t,o,a){t[a.substr(0,2)]=p(e)}),G(["gg","GG"],function(t,o,a,n){o[n]=e.parseTwoDigitYear(t)}),A("Q",0,0,"quarter"),C("quarter","Q"),x("Q",Ha),F("Q",function(e,t){t[ln]=3*(p(e)-1)}),A("D",["DD",2],"Do","date"),C("date","D"),x("D",Za),x("DD",Za,ja),x("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),F(["D","DD"],cn),F("Do",function(e,t){t[cn]=p(e.match(Za)[0],10)});var En=D("Date",!0);A("d",0,"do","day"),A("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),A("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),A("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),A("e",0,0,"weekday"),A("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),x("d",Za),x("e",Za),x("E",Za),x("dd",an),x("ddd",an),x("dddd",an),G(["dd","ddd","dddd"],function(e,t,o){var a=o._locale.weekdaysParse(e);null!=a?t.d=a:c(o).invalidWeekday=e}),G(["d","e","E"],function(e,t,o,a){t[a]=p(e)});var Bn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),An="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");A("H",["HH",2],0,"hour"),A("h",["hh",2],0,function(){return this.hours()%12||12}),jo("a",!0),jo("A",!1),C("hour","h"),x("a",zo),x("A",zo),x("H",Za),x("h",Za),x("HH",Za,ja),x("hh",Za,ja),F(["H","HH"],un),F(["a","A"],function(e,t,o){o._isPm=o._locale.isPM(e),o._meridiem=e}),F(["h","hh"],function(e,t,o){t[un]=p(e),c(o).bigHour=!0});var Ln=/[ap]\.?m?\.?/i,Un=D("Hours",!0);A("m",["mm",2],0,"minute"),C("minute","m"),x("m",Za),x("mm",Za,ja),F(["m","mm"],dn);var In=D("Minutes",!1);A("s",["ss",2],0,"second"),C("second","s"),x("s",Za),x("ss",Za,ja),F(["s","ss"],mn);var Nn=D("Seconds",!1);A("S",0,0,function(){return~~(this.millisecond()/100)}),A(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),A(0,["SSS",3],0,"millisecond"),A(0,["SSSS",4],0,function(){return 10*this.millisecond()}),A(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),A(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),A(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),A(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),A(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),C("millisecond","ms"),x("S",Ja,Ha),x("SS",Ja,ja),x("SSS",Ja,za);var xn;for(xn="SSSS";xn.length<=9;xn+="S")x(xn,Ka);for(xn="S";xn.length<=9;xn+="S")F(xn,Zo);var Wn=D("Milliseconds",!1);A("z",0,0,"zoneAbbr"),A("zz",0,0,"zoneName");var Yn=f.prototype;Yn.add=Dn,Yn.calendar=oo,Yn.clone=ao,Yn.diff=lo,Yn.endOf=bo,Yn.format=fo,Yn.from=go,Yn.fromNow=ho,Yn.to=po,Yn.toNow=yo,Yn.get=E,Yn.invalidAt=Oo,Yn.isAfter=no,Yn.isBefore=ro,Yn.isBetween=io,Yn.isSame=so,Yn.isValid=$o,Yn.lang=Pn,Yn.locale=vo,Yn.localeData=So,Yn.max=Mn,Yn.min=_n,Yn.parsingFlags=Do,Yn.set=E,Yn.startOf=ko,Yn.subtract=On,Yn.toArray=Co,Yn.toObject=wo,Yn.toDate=Mo,Yn.toISOString=mo,Yn.toJSON=mo,Yn.toString=uo,Yn.unix=_o,Yn.valueOf=To,Yn.year=bn,Yn.isLeapYear=lt,Yn.weekYear=Bo,Yn.isoWeekYear=Ao,Yn.quarter=Yn.quarters=Uo,Yn.month=J,Yn.daysInMonth=q,Yn.week=Yn.weeks=ft,Yn.isoWeek=Yn.isoWeeks=gt,Yn.weeksInYear=Lo,Yn.isoWeeksInYear=Ro,Yn.date=En,Yn.day=Yn.days=Fo,Yn.weekday=Go,Yn.isoWeekday=Ho,Yn.dayOfYear=pt,Yn.hour=Yn.hours=Un,Yn.minute=Yn.minutes=In,Yn.second=Yn.seconds=Nn,Yn.millisecond=Yn.milliseconds=Wn,Yn.utcOffset=xt,Yn.utc=Yt,Yn.local=Ft,Yn.parseZone=Gt,Yn.hasAlignedHourOffset=Ht,Yn.isDST=jt,Yn.isDSTShifted=zt,Yn.isLocal=Vt,Yn.isUtcOffset=Xt,Yn.isUtc=Zt,Yn.isUTC=Zt,Yn.zoneAbbr=Jo,Yn.zoneName=qo,Yn.dates=et("dates accessor is deprecated. Use date instead.",En),Yn.months=et("months accessor is deprecated. Use month instead",J),Yn.years=et("years accessor is deprecated. Use year instead",bn),Yn.zone=et("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Wt);var Fn=Yn,Gn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Hn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},jn="Invalid date",zn="%d",Vn=/\d{1,2}/,Xn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Zn=v.prototype;Zn._calendar=Gn,Zn.calendar=ea,Zn._longDateFormat=Hn,Zn.longDateFormat=ta,Zn._invalidDate=jn,Zn.invalidDate=oa,Zn._ordinal=zn,Zn.ordinal=aa,Zn._ordinalParse=Vn,Zn.preparse=na,Zn.postformat=na,Zn._relativeTime=Xn,Zn.relativeTime=ra,Zn.pastFuture=ia,Zn.set=sa,Zn.months=z,Zn._months=gn,Zn.monthsShort=V,Zn._monthsShort=hn,Zn.monthsParse=X,Zn.week=ut,Zn._week=Tn,Zn.firstDayOfYear=mt,Zn.firstDayOfWeek=dt,Zn.weekdays=No,Zn._weekdays=Bn,Zn.weekdaysMin=Wo,Zn._weekdaysMin=Rn,Zn.weekdaysShort=xo,Zn._weekdaysShort=An,Zn.weekdaysParse=Yo,Zn.isPM=Vo,Zn._meridiemParse=Ln,Zn.meridiem=Xo,T("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,o=1===p(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+o}}),e.lang=et("moment.lang is deprecated. Use moment.locale instead.",T),e.langData=et("moment.langData is deprecated. Use moment.localeData instead.",M);var Jn=Math.abs,qn=Ca("ms"),Qn=Ca("s"),Kn=Ca("m"),er=Ca("h"),tr=Ca("d"),or=Ca("w"),ar=Ca("M"),nr=Ca("y"),rr=$a("milliseconds"),ir=$a("seconds"),sr=$a("minutes"),lr=$a("hours"),cr=$a("days"),ur=$a("months"),dr=$a("years"),mr=Math.round,fr={s:45,m:45,h:22,d:26,M:11},gr=Math.abs,hr=At.prototype;hr.abs=ha,hr.add=ya,hr.subtract=va,hr.as=_a,hr.asMilliseconds=qn,hr.asSeconds=Qn,hr.asMinutes=Kn,hr.asHours=er,hr.asDays=tr,hr.asWeeks=or,hr.asMonths=ar,hr.asYears=nr,hr.valueOf=Ma,hr._bubble=ka,hr.get=wa,hr.milliseconds=rr,hr.seconds=ir,hr.minutes=sr,hr.hours=lr,hr.days=cr,hr.weeks=Da,hr.months=ur,hr.years=dr,hr.humanize=Ba,hr.toISOString=Aa,hr.toString=Aa,hr.toJSON=Aa,hr.locale=vo,hr.localeData=So,hr.toIsoString=et("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Aa),hr.lang=Pn,A("X",0,0,"unix"),A("x",0,0,"valueOf"),x("x",en),x("X",on),F("X",function(e,t,o){o._d=new Date(1e3*parseFloat(e,10))}),F("x",function(e,t,o){o._d=new Date(p(e))}),e.version="2.10.6",t(Ot),e.fn=Fn,e.min=Et,e.max=Bt,e.utc=s,e.unix=Qo,e.months=ua,e.isDate=a,e.locale=T,e.invalid=d,e.duration=Jt,e.isMoment=g,e.weekdays=ma,e.parseZone=Ko,e.localeData=M,e.isDuration=Rt,e.monthsShort=da,e.weekdaysMin=ga,e.defineLocale=_,e.weekdaysShort=fa,e.normalizeUnits=w,e.relativeTimeThreshold=Ea;var pr=e;return pr});